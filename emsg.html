<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" type="image/x-icon" href="/images/logo/ume.ink.fav.ico" />
    <link rel="stylesheet" href="main.css" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <style>
      body {
        background-color: #f0f0f0;
        padding-top: 30px;
      }
      #textWrapper {
        width: calc(100% - 20px);
        max-width: 800px;
        margin: 20px auto;
        padding: 0 10px;
        text-align: left;
      }
      #textWrapper textarea {
        width: calc(100% - 44px);
        max-width: 756px;
        height: 300px;
        padding: 20px;
        border: 2px solid #f24632;
        background-color: #fff;
        resize: none;
        font-size: 16px;
      }
      #textWrapper textarea:focus {
        outline-color: #f24632;
      }
      #textWrapper .info {
        padding: 7px 1px;
        font-size: 8px;
        color: #666;
      }
      .hidden {
        display: none;
      }
      #cpBt:after {
        padding-left: 5px;
        font-size: 10px;
        color: #f24632;
        content: attr(data-value);
      }
    </style>

    <title> Encrypt a message - UME.INK </title>
  </head>

  <body>
    <div class="leftAlign leftMargin">
      <a href="index.html">< Back</a>
    </div>
    <div id="textWrapper">
      <h5 id="notify">type a message:</h5>
      <textarea id="msgbox" autofocus></textarea>
      <button id='encBt' onclick="encrypt()">encrypt it with my PGP public key</button>
      <button id='editBt' class="hidden" onclick="edit()">back to edit mode</button>
      <a id='sendm' class="hidden buttonStyle" href="" target="_blank">mail to me</a>
      <span id='cpBt' class="hidden"><button onclick="copy()">COPY</button></span>
      <div class="info">Powered by OpenPGP.js, works well with recent versions of Chrome, Firefox, Safari and Edge</div>
    </div>
    <script src="/openpgp.min.js" integrity="sha384-TS0uWY7lSW2o43PKPc6ICKryJRZV2gtYvuV/U/h0hKkCC/DIDxOHRIo6w/tH+ql7"></script>
    <script>
      const pubkey =
        ['-----BEGIN PGP PUBLIC KEY BLOCK-----',
         '',
         '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',
         'A/IGyM1YtdA=',
         '=OEzu',
         '-----END PGP PUBLIC KEY BLOCK-----'].join('\n');
        var msg = '';
        const notif  = document.getElementById('notify');
        const encBt  = document.getElementById('encBt');
        const sendBt = document.getElementById('sendm');
        const cpBtS  = document.getElementById('cpBt');
        const editBt = document.getElementById('editBt');
        const msgB   = document.getElementById('msgbox');

        const encryptFunction = async(m) => {
          const publicKey = await openpgp.readKey({ armoredKey: pubkey });
          const encrypted = await openpgp.encrypt({
              message: await openpgp.createMessage({ text: m }),
              encryptionKeys: publicKey
          });
          return encrypted;
        }
        var encrypt = async() => {
          msg = msgB.value;
          encBt.innerHTML = 'encrypt it with my PGP public key (encrypting..)';
          cipher = (await encryptFunction(msg));
          msgB.value = cipher;
          notif.innerHTML = 'the encrypted message:';
          sendBt.href='mailto:i@bitbili.net?subject='
            + encodeURIComponent('A message from UME.INK')
            + '&body='
            + encodeURIComponent(cipher);
          msgB.disabled = true;
          msgB.style.backgroundColor = '#f3f3f3';
          encBt.style.display = 'none';
          sendBt.style.display = 'inline-block';
          editBt.style.display = 'inline-block';
          cpBtS.style.display = 'inline-block';
          window.getSelection().removeAllRanges();
          cpBtS.setAttribute('data-value', '');
        }
        function copy() {
          cpBtS.setAttribute('data-value', '');
          if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
            var range = document.createRange();
            msgB.disabled=false;
            range.selectNodeContents(msgB);
            var s = window.getSelection();
            s.removeAllRanges();
            s.addRange(range);
            msgB.setSelectionRange(0, 999999);
            msgB.disabled=true;
          } else {
            msgB.disabled=false;
            msgB.select();
            msgB.disabled=true;
          }
          copied = window.getSelection().rangeCount > 0 && document.execCommand("copy");
          cpBtS.setAttribute('data-value', copied ? 'copied!' : 'uncopied!');
        }
        function edit() {
          msgB.value = msg;
          notif.innerHTML = 'type a message:';
          msgB.disabled = false;
          msgB.focus();
          msgB.style.backgroundColor = '#fff';
          encBt.innerHTML = 'encrypt it with my PGP public key';
          sendBt.href = '';
          encBt.style.display = 'inline-block';
          sendBt.style.display = 'none';
          editBt.style.display = 'none';
          cpBtS.style.display = 'none';
        }
    </script>
  </body>
</html>
